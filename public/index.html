<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat_App</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
    <nav class="navbar">
        <h1>Welcome To Chatting App</h1>
        <img src="logo.png" alt="logo"></nav>
    <div class="container">
        <div class="right"></div>
        <div class="left"></div>
    </div>
    <div class="bottom">
        <form action="submit" class="form">
            <input type="text" placeholder="Enter your message here" class="input">
            <button class="btn">Send</button>
        </form>
    </div>
</body>
<!--firstly install socket.io  for frontend-->
<script src="/socket.io/socket.io.js"></script>
<script>
      
      const socket = io();
      const button = document.querySelector(".btn")
      const messageInpt=document.querySelector(".input")
      const messageContainer = document.querySelector(".right")
      const form = document.querySelector(".form");
      // Ask user for their name
      const username = prompt("Enter your username:") || "Anonymous";

      form.addEventListener("submit",function (e){
        e.preventDefault();
      
        const message = messageInpt.value.trim();
        if (message !== "") {
        appendMessage(`You: ${message}`,"sent"); // Display message instantly
        socket.emit("user-message", {username,message}); // Send message to server
        messageInpt.value = ""; // Clear input field
    }
});

function appendMessage(msg, type) {
    const div = document.createElement("div");
    div.innerText = msg;
    div.classList.add("message", type);

    // Append sent messages to the right and received messages to the left
    if (type === "sent") {
        document.querySelector(".right").appendChild(div);
    } else {
        document.querySelector(".left").appendChild(div);
    }
}

// Listen for incoming messages from the server
socket.on("message", (data) => {

    const {username,message}=data;
    appendMessage(`${username}:${message}`, "received"); // Style as received message
});

   
</script>
</html>
